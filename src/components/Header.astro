---
const currentPath = Astro.url.pathname;

const navLinks = [
  { name: 'now', href: '/now' },
  { name: 'blog', href: '/blog' },
  { name: 'misc', href: '/misc' },
  { name: 'work', href: '/work' },
  { name: 'index', href: '/index-all' },
];

// Determine page title based on current path
const currentPage = navLinks.find((link) => currentPath.startsWith(link.href));
const pageTitle = currentPage
  ? currentPage.name.charAt(0).toUpperCase() + currentPage.name.slice(1)
  : null;
---

<header class="layout-container mb-12 flex items-baseline justify-between gap-8">
  <div class="flex-1 min-w-0">
    <h1 class="text-black text-2xl font-bold">
      <a href="/" class="transition-colors hover:text-black">
        Eric Huang
      </a>
      {
        pageTitle && (
          <span class="page-subtitle">
            <span class="text-neutral-400">â€”</span>
            {pageTitle}
          </span>
        )
      }
    </h1>
  </div>

  <nav
    class="flex flex-shrink-0 items-baseline justify-end space-x-6 text-lg text-neutral-500"
  >
    {
      navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'transition-colors hover:text-black',
            { 'text-black': currentPath.startsWith(link.href) },
          ]}
        >
          {link.name}
        </a>
      ))
    }
  </nav>
</header>

<style>
  .page-subtitle {
    @apply font-light;
  }

  /* Mobile: stack subtitle */
  @media (max-width: 580px) {
    .page-subtitle {
      @apply block text-xl;
    }

    .page-subtitle :first-child {
      @apply hidden;
    }
  }

  /* Mobile: stack nav */
  @media (max-width: 420px) {
    nav {
      @apply flex-col items-end space-x-0;
    }
  }
</style>
